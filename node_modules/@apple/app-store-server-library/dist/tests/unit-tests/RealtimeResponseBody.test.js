"use strict";
// Copyright (c) 2025 Apple Inc. Licensed under MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
describe('RealtimeResponseBody', () => {
    it('should serialize RealtimeResponseBody with Message', () => {
        // Create a RealtimeResponseBody with a Message
        const messageId = "a1b2c3d4-e5f6-7890-a1b2-c3d4e5f67890";
        const message = {
            messageIdentifier: messageId
        };
        const responseBody = {
            message: message
        };
        // Serialize to JSON
        const json = JSON.stringify(responseBody);
        const jsonObj = JSON.parse(json);
        // Validate JSON structure
        expect(jsonObj).toHaveProperty("message");
        expect(jsonObj.message).toHaveProperty("messageIdentifier");
        expect(jsonObj.message.messageIdentifier).toBe("a1b2c3d4-e5f6-7890-a1b2-c3d4e5f67890");
        expect(jsonObj).not.toHaveProperty("alternateProduct");
        expect(jsonObj).not.toHaveProperty("promotionalOffer");
        // Deserialize back
        const deserialized = JSON.parse(json);
        // Verify
        expect(deserialized.message).toBeDefined();
        expect(deserialized.message?.messageIdentifier).toBe(messageId);
        expect(deserialized.alternateProduct).toBeUndefined();
        expect(deserialized.promotionalOffer).toBeUndefined();
    });
    it('should serialize RealtimeResponseBody with AlternateProduct', () => {
        // Create a RealtimeResponseBody with an AlternateProduct
        const messageId = "b2c3d4e5-f6a7-8901-b2c3-d4e5f6a78901";
        const productId = "com.example.alternate.product";
        const alternateProduct = {
            messageIdentifier: messageId,
            productId: productId
        };
        const responseBody = {
            alternateProduct: alternateProduct
        };
        // Serialize to JSON
        const json = JSON.stringify(responseBody);
        const jsonObj = JSON.parse(json);
        // Validate JSON structure
        expect(jsonObj).toHaveProperty("alternateProduct");
        expect(jsonObj.alternateProduct).toHaveProperty("messageIdentifier");
        expect(jsonObj.alternateProduct).toHaveProperty("productId");
        expect(jsonObj.alternateProduct.messageIdentifier).toBe("b2c3d4e5-f6a7-8901-b2c3-d4e5f6a78901");
        expect(jsonObj.alternateProduct.productId).toBe("com.example.alternate.product");
        expect(jsonObj).not.toHaveProperty("message");
        expect(jsonObj).not.toHaveProperty("promotionalOffer");
        // Deserialize back
        const deserialized = JSON.parse(json);
        // Verify
        expect(deserialized.message).toBeUndefined();
        expect(deserialized.alternateProduct).toBeDefined();
        expect(deserialized.alternateProduct?.messageIdentifier).toBe(messageId);
        expect(deserialized.alternateProduct?.productId).toBe(productId);
        expect(deserialized.promotionalOffer).toBeUndefined();
    });
    it('should serialize RealtimeResponseBody with PromotionalOffer V2', () => {
        // Create a RealtimeResponseBody with a PromotionalOffer (V2 signature)
        const messageId = "c3d4e5f6-a789-0123-c3d4-e5f6a7890123";
        const signatureV2 = "signature2";
        const promotionalOffer = {
            messageIdentifier: messageId,
            promotionalOfferSignatureV2: signatureV2
        };
        const responseBody = {
            promotionalOffer: promotionalOffer
        };
        // Serialize to JSON
        const json = JSON.stringify(responseBody);
        const jsonObj = JSON.parse(json);
        // Validate JSON structure
        expect(jsonObj).toHaveProperty("promotionalOffer");
        expect(jsonObj.promotionalOffer).toHaveProperty("messageIdentifier");
        expect(jsonObj.promotionalOffer).toHaveProperty("promotionalOfferSignatureV2");
        expect(jsonObj.promotionalOffer.messageIdentifier).toBe("c3d4e5f6-a789-0123-c3d4-e5f6a7890123");
        expect(jsonObj.promotionalOffer.promotionalOfferSignatureV2).toBe("signature2");
        expect(jsonObj.promotionalOffer).not.toHaveProperty("promotionalOfferSignatureV1");
        expect(jsonObj).not.toHaveProperty("message");
        expect(jsonObj).not.toHaveProperty("alternateProduct");
        // Deserialize back
        const deserialized = JSON.parse(json);
        // Verify
        expect(deserialized.message).toBeUndefined();
        expect(deserialized.alternateProduct).toBeUndefined();
        expect(deserialized.promotionalOffer).toBeDefined();
        expect(deserialized.promotionalOffer?.messageIdentifier).toBe(messageId);
        expect(deserialized.promotionalOffer?.promotionalOfferSignatureV2).toBe(signatureV2);
        expect(deserialized.promotionalOffer?.promotionalOfferSignatureV1).toBeUndefined();
    });
    it('should serialize RealtimeResponseBody with PromotionalOffer V1', () => {
        // Create a RealtimeResponseBody with a PromotionalOffer (V1 signature)
        const messageId = "d4e5f6a7-8901-2345-d4e5-f6a789012345";
        const nonce = "e5f6a789-0123-4567-e5f6-a78901234567";
        const appAccountToken = "f6a78901-2345-6789-f6a7-890123456789";
        const signatureV1 = {
            encodedSignature: "base64encodedSignature",
            productId: "com.example.product",
            nonce: nonce,
            timestamp: 1698148900000,
            keyId: "keyId123",
            offerIdentifier: "offer123",
            appAccountToken: appAccountToken
        };
        const promotionalOffer = {
            messageIdentifier: messageId,
            promotionalOfferSignatureV1: signatureV1
        };
        const responseBody = {
            promotionalOffer: promotionalOffer
        };
        // Serialize to JSON
        const json = JSON.stringify(responseBody);
        const jsonObj = JSON.parse(json);
        // Validate JSON structure
        expect(jsonObj).toHaveProperty("promotionalOffer");
        expect(jsonObj.promotionalOffer).toHaveProperty("messageIdentifier");
        expect(jsonObj.promotionalOffer).toHaveProperty("promotionalOfferSignatureV1");
        expect(jsonObj.promotionalOffer.messageIdentifier).toBe("d4e5f6a7-8901-2345-d4e5-f6a789012345");
        const v1Node = jsonObj.promotionalOffer.promotionalOfferSignatureV1;
        expect(v1Node).toHaveProperty("encodedSignature");
        expect(v1Node).toHaveProperty("productId");
        expect(v1Node).toHaveProperty("nonce");
        expect(v1Node).toHaveProperty("timestamp");
        expect(v1Node).toHaveProperty("keyId");
        expect(v1Node).toHaveProperty("offerIdentifier");
        expect(v1Node).toHaveProperty("appAccountToken");
        expect(v1Node.encodedSignature).toBe("base64encodedSignature");
        expect(v1Node.productId).toBe("com.example.product");
        expect(v1Node.nonce).toBe("e5f6a789-0123-4567-e5f6-a78901234567");
        expect(v1Node.timestamp).toBe(1698148900000);
        expect(v1Node.keyId).toBe("keyId123");
        expect(v1Node.offerIdentifier).toBe("offer123");
        expect(v1Node.appAccountToken).toBe("f6a78901-2345-6789-f6a7-890123456789");
        expect(jsonObj.promotionalOffer).not.toHaveProperty("promotionalOfferSignatureV2");
        expect(jsonObj).not.toHaveProperty("message");
        expect(jsonObj).not.toHaveProperty("alternateProduct");
        // Deserialize back
        const deserialized = JSON.parse(json);
        // Verify
        expect(deserialized.message).toBeUndefined();
        expect(deserialized.alternateProduct).toBeUndefined();
        expect(deserialized.promotionalOffer).toBeDefined();
        expect(deserialized.promotionalOffer?.messageIdentifier).toBe(messageId);
        expect(deserialized.promotionalOffer?.promotionalOfferSignatureV2).toBeUndefined();
        expect(deserialized.promotionalOffer?.promotionalOfferSignatureV1).toBeDefined();
        const deserializedV1 = deserialized.promotionalOffer?.promotionalOfferSignatureV1;
        expect(deserializedV1?.productId).toBe("com.example.product");
        expect(deserializedV1?.offerIdentifier).toBe("offer123");
        expect(deserializedV1?.nonce).toBe(nonce);
        expect(deserializedV1?.timestamp).toBe(1698148900000);
        expect(deserializedV1?.keyId).toBe("keyId123");
        expect(deserializedV1?.appAccountToken).toBe(appAccountToken);
        expect(deserializedV1?.encodedSignature).toBe("base64encodedSignature");
    });
    it('should serialize RealtimeResponseBody with correct field names', () => {
        // Test that JSON serialization uses correct field names
        const messageId = "12345678-1234-1234-1234-123456789012";
        const message = {
            messageIdentifier: messageId
        };
        const responseBody = {
            message: message
        };
        const json = JSON.stringify(responseBody);
        // Verify JSON contains correct field names
        expect(json).toContain('"message"');
        expect(json).toContain('"messageIdentifier"');
        expect(json).toContain('"12345678-1234-1234-1234-123456789012"');
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVhbHRpbWVSZXNwb25zZUJvZHkudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3RzL3VuaXQtdGVzdHMvUmVhbHRpbWVSZXNwb25zZUJvZHkudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNERBQTREOztBQVE1RCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO0lBQ2xDLEVBQUUsQ0FBQyxvREFBb0QsRUFBRSxHQUFHLEVBQUU7UUFDMUQsK0NBQStDO1FBQy9DLE1BQU0sU0FBUyxHQUFHLHNDQUFzQyxDQUFBO1FBQ3hELE1BQU0sT0FBTyxHQUFZO1lBQ3JCLGlCQUFpQixFQUFFLFNBQVM7U0FDL0IsQ0FBQTtRQUNELE1BQU0sWUFBWSxHQUF5QjtZQUN2QyxPQUFPLEVBQUUsT0FBTztTQUNuQixDQUFBO1FBRUQsb0JBQW9CO1FBQ3BCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLENBQUE7UUFDekMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUVoQywwQkFBMEI7UUFDMUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUN6QyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFBO1FBQzNELE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUFDLHNDQUFzQyxDQUFDLENBQUE7UUFDdEYsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsa0JBQWtCLENBQUMsQ0FBQTtRQUN0RCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFBO1FBRXRELG1CQUFtQjtRQUNuQixN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WUFBWSxHQUF5QjtZQUN2QyxPQUFPLEVBQUUsT0FBTztTQUNuQixDQUFBO1FBRUQsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQTtRQUV6QywyQ0FBMkM7UUFDM0MsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUNuQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsU0FBUyxDQUFDLHFCQUFxQixDQUFDLENBQUE7UUFDN0MsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLFNBQVMsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFBO0lBQ3BFLENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMjUgQXBwbGUgSW5jLiBMaWNlbnNlZCB1bmRlciBNSVQgTGljZW5zZS5cblxuaW1wb3J0IHsgUmVhbHRpbWVSZXNwb25zZUJvZHkgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1JlYWx0aW1lUmVzcG9uc2VCb2R5XCI7XG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSBcIi4uLy4uL21vZGVscy9NZXNzYWdlXCI7XG5pbXBvcnQgeyBBbHRlcm5hdGVQcm9kdWN0IH0gZnJvbSBcIi4uLy4uL21vZGVscy9BbHRlcm5hdGVQcm9kdWN0XCI7XG5pbXBvcnQgeyBQcm9tb3Rpb25hbE9mZmVyIH0gZnJvbSBcIi4uLy4uL21vZGVscy9Qcm9tb3Rpb25hbE9mZmVyXCI7XG5pbXBvcnQgeyBQcm9tb3Rpb25hbE9mZmVyU2lnbmF0dXJlVjEgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL1Byb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMVwiO1xuXG5kZXNjcmliZSgnUmVhbHRpbWVSZXNwb25zZUJvZHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzZXJpYWxpemUgUmVhbHRpbWVSZXNwb25zZUJvZHkgd2l0aCBNZXNzYWdlJywgKCkgPT4ge1xuICAgICAgICAvLyBDcmVhdGUgYSBSZWFsdGltZVJlc3BvbnNlQm9keSB3aXRoIGEgTWVzc2FnZVxuICAgICAgICBjb25zdCBtZXNzYWdlSWQgPSBcImExYjJjM2Q0LWU1ZjYtNzg5MC1hMWIyLWMzZDRlNWY2Nzg5MFwiXG4gICAgICAgIGNvbnN0IG1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICBtZXNzYWdlSWRlbnRpZmllcjogbWVzc2FnZUlkXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzcG9uc2VCb2R5OiBSZWFsdGltZVJlc3BvbnNlQm9keSA9IHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlcmlhbGl6ZSB0byBKU09OXG4gICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShyZXNwb25zZUJvZHkpXG4gICAgICAgIGNvbnN0IGpzb25PYmogPSBKU09OLnBhcnNlKGpzb24pXG5cbiAgICAgICAgLy8gVmFsaWRhdGUgSlNPTiBzdHJ1Y3R1cmVcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLnRvSGF2ZVByb3BlcnR5KFwibWVzc2FnZVwiKVxuICAgICAgICBleHBlY3QoanNvbk9iai5tZXNzYWdlKS50b0hhdmVQcm9wZXJ0eShcIm1lc3NhZ2VJZGVudGlmaWVyXCIpXG4gICAgICAgIGV4cGVjdChqc29uT2JqLm1lc3NhZ2UubWVzc2FnZUlkZW50aWZpZXIpLnRvQmUoXCJhMWIyYzNkNC1lNWY2LTc4OTAtYTFiMi1jM2Q0ZTVmNjc4OTBcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLm5vdC50b0hhdmVQcm9wZXJ0eShcImFsdGVybmF0ZVByb2R1Y3RcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLm5vdC50b0hhdmVQcm9wZXJ0eShcInByb21vdGlvbmFsT2ZmZXJcIilcblxuICAgICAgICAvLyBEZXNlcmlhbGl6ZSBiYWNrXG4gICAgICAgIGNvbnN0IGRlc2VyaWFsaXplZDogUmVhbHRpbWVSZXNwb25zZUJvZHkgPSBKU09OLnBhcnNlKGpzb24pXG5cbiAgICAgICAgLy8gVmVyaWZ5XG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQubWVzc2FnZSkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLm1lc3NhZ2U/Lm1lc3NhZ2VJZGVudGlmaWVyKS50b0JlKG1lc3NhZ2VJZClcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZC5hbHRlcm5hdGVQcm9kdWN0KS50b0JlVW5kZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZC5wcm9tb3Rpb25hbE9mZmVyKS50b0JlVW5kZWZpbmVkKClcbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBzZXJpYWxpemUgUmVhbHRpbWVSZXNwb25zZUJvZHkgd2l0aCBBbHRlcm5hdGVQcm9kdWN0JywgKCkgPT4ge1xuICAgICAgICAvLyBDcmVhdGUgYSBSZWFsdGltZVJlc3BvbnNlQm9keSB3aXRoIGFuIEFsdGVybmF0ZVByb2R1Y3RcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gXCJiMmMzZDRlNS1mNmE3LTg5MDEtYjJjMy1kNGU1ZjZhNzg5MDFcIlxuICAgICAgICBjb25zdCBwcm9kdWN0SWQgPSBcImNvbS5leGFtcGxlLmFsdGVybmF0ZS5wcm9kdWN0XCJcbiAgICAgICAgY29uc3QgYWx0ZXJuYXRlUHJvZHVjdDogQWx0ZXJuYXRlUHJvZHVjdCA9IHtcbiAgICAgICAgICAgIG1lc3NhZ2VJZGVudGlmaWVyOiBtZXNzYWdlSWQsXG4gICAgICAgICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQm9keTogUmVhbHRpbWVSZXNwb25zZUJvZHkgPSB7XG4gICAgICAgICAgICBhbHRlcm5hdGVQcm9kdWN0OiBhbHRlcm5hdGVQcm9kdWN0XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXJpYWxpemUgdG8gSlNPTlxuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkocmVzcG9uc2VCb2R5KVxuICAgICAgICBjb25zdCBqc29uT2JqID0gSlNPTi5wYXJzZShqc29uKVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIEpTT04gc3RydWN0dXJlXG4gICAgICAgIGV4cGVjdChqc29uT2JqKS50b0hhdmVQcm9wZXJ0eShcImFsdGVybmF0ZVByb2R1Y3RcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmouYWx0ZXJuYXRlUHJvZHVjdCkudG9IYXZlUHJvcGVydHkoXCJtZXNzYWdlSWRlbnRpZmllclwiKVxuICAgICAgICBleHBlY3QoanNvbk9iai5hbHRlcm5hdGVQcm9kdWN0KS50b0hhdmVQcm9wZXJ0eShcInByb2R1Y3RJZFwiKVxuICAgICAgICBleHBlY3QoanNvbk9iai5hbHRlcm5hdGVQcm9kdWN0Lm1lc3NhZ2VJZGVudGlmaWVyKS50b0JlKFwiYjJjM2Q0ZTUtZjZhNy04OTAxLWIyYzMtZDRlNWY2YTc4OTAxXCIpXG4gICAgICAgIGV4cGVjdChqc29uT2JqLmFsdGVybmF0ZVByb2R1Y3QucHJvZHVjdElkKS50b0JlKFwiY29tLmV4YW1wbGUuYWx0ZXJuYXRlLnByb2R1Y3RcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLm5vdC50b0hhdmVQcm9wZXJ0eShcIm1lc3NhZ2VcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLm5vdC50b0hhdmVQcm9wZXJ0eShcInByb21vdGlvbmFsT2ZmZXJcIilcblxuICAgICAgICAvLyBEZXNlcmlhbGl6ZSBiYWNrXG4gICAgICAgIGNvbnN0IGRlc2VyaWFsaXplZDogUmVhbHRpbWVSZXNwb25zZUJvZHkgPSBKU09OLnBhcnNlKGpzb24pXG5cbiAgICAgICAgLy8gVmVyaWZ5XG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQubWVzc2FnZSkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQuYWx0ZXJuYXRlUHJvZHVjdCkudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLmFsdGVybmF0ZVByb2R1Y3Q/Lm1lc3NhZ2VJZGVudGlmaWVyKS50b0JlKG1lc3NhZ2VJZClcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZC5hbHRlcm5hdGVQcm9kdWN0Py5wcm9kdWN0SWQpLnRvQmUocHJvZHVjdElkKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLnByb21vdGlvbmFsT2ZmZXIpLnRvQmVVbmRlZmluZWQoKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHNlcmlhbGl6ZSBSZWFsdGltZVJlc3BvbnNlQm9keSB3aXRoIFByb21vdGlvbmFsT2ZmZXIgVjInLCAoKSA9PiB7XG4gICAgICAgIC8vIENyZWF0ZSBhIFJlYWx0aW1lUmVzcG9uc2VCb2R5IHdpdGggYSBQcm9tb3Rpb25hbE9mZmVyIChWMiBzaWduYXR1cmUpXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VJZCA9IFwiYzNkNGU1ZjYtYTc4OS0wMTIzLWMzZDQtZTVmNmE3ODkwMTIzXCJcbiAgICAgICAgY29uc3Qgc2lnbmF0dXJlVjIgPSBcInNpZ25hdHVyZTJcIlxuICAgICAgICBjb25zdCBwcm9tb3Rpb25hbE9mZmVyOiBQcm9tb3Rpb25hbE9mZmVyID0ge1xuICAgICAgICAgICAgbWVzc2FnZUlkZW50aWZpZXI6IG1lc3NhZ2VJZCxcbiAgICAgICAgICAgIHByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMjogc2lnbmF0dXJlVjJcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZUJvZHk6IFJlYWx0aW1lUmVzcG9uc2VCb2R5ID0ge1xuICAgICAgICAgICAgcHJvbW90aW9uYWxPZmZlcjogcHJvbW90aW9uYWxPZmZlclxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VyaWFsaXplIHRvIEpTT05cbiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlQm9keSlcbiAgICAgICAgY29uc3QganNvbk9iaiA9IEpTT04ucGFyc2UoanNvbilcblxuICAgICAgICAvLyBWYWxpZGF0ZSBKU09OIHN0cnVjdHVyZVxuICAgICAgICBleHBlY3QoanNvbk9iaikudG9IYXZlUHJvcGVydHkoXCJwcm9tb3Rpb25hbE9mZmVyXCIpXG4gICAgICAgIGV4cGVjdChqc29uT2JqLnByb21vdGlvbmFsT2ZmZXIpLnRvSGF2ZVByb3BlcnR5KFwibWVzc2FnZUlkZW50aWZpZXJcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmoucHJvbW90aW9uYWxPZmZlcikudG9IYXZlUHJvcGVydHkoXCJwcm9tb3Rpb25hbE9mZmVyU2lnbmF0dXJlVjJcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmoucHJvbW90aW9uYWxPZmZlci5tZXNzYWdlSWRlbnRpZmllcikudG9CZShcImMzZDRlNWY2LWE3ODktMDEyMy1jM2Q0LWU1ZjZhNzg5MDEyM1wiKVxuICAgICAgICBleHBlY3QoanNvbk9iai5wcm9tb3Rpb25hbE9mZmVyLnByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMikudG9CZShcInNpZ25hdHVyZTJcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmoucHJvbW90aW9uYWxPZmZlcikubm90LnRvSGF2ZVByb3BlcnR5KFwicHJvbW90aW9uYWxPZmZlclNpZ25hdHVyZVYxXCIpXG4gICAgICAgIGV4cGVjdChqc29uT2JqKS5ub3QudG9IYXZlUHJvcGVydHkoXCJtZXNzYWdlXCIpXG4gICAgICAgIGV4cGVjdChqc29uT2JqKS5ub3QudG9IYXZlUHJvcGVydHkoXCJhbHRlcm5hdGVQcm9kdWN0XCIpXG5cbiAgICAgICAgLy8gRGVzZXJpYWxpemUgYmFja1xuICAgICAgICBjb25zdCBkZXNlcmlhbGl6ZWQ6IFJlYWx0aW1lUmVzcG9uc2VCb2R5ID0gSlNPTi5wYXJzZShqc29uKVxuXG4gICAgICAgIC8vIFZlcmlmeVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLm1lc3NhZ2UpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLmFsdGVybmF0ZVByb2R1Y3QpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLnByb21vdGlvbmFsT2ZmZXIpLnRvQmVEZWZpbmVkKClcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZC5wcm9tb3Rpb25hbE9mZmVyPy5tZXNzYWdlSWRlbnRpZmllcikudG9CZShtZXNzYWdlSWQpXG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQucHJvbW90aW9uYWxPZmZlcj8ucHJvbW90aW9uYWxPZmZlclNpZ25hdHVyZVYyKS50b0JlKHNpZ25hdHVyZVYyKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLnByb21vdGlvbmFsT2ZmZXI/LnByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMSkudG9CZVVuZGVmaW5lZCgpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgc2VyaWFsaXplIFJlYWx0aW1lUmVzcG9uc2VCb2R5IHdpdGggUHJvbW90aW9uYWxPZmZlciBWMScsICgpID0+IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgUmVhbHRpbWVSZXNwb25zZUJvZHkgd2l0aCBhIFByb21vdGlvbmFsT2ZmZXIgKFYxIHNpZ25hdHVyZSlcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gXCJkNGU1ZjZhNy04OTAxLTIzNDUtZDRlNS1mNmE3ODkwMTIzNDVcIlxuICAgICAgICBjb25zdCBub25jZSA9IFwiZTVmNmE3ODktMDEyMy00NTY3LWU1ZjYtYTc4OTAxMjM0NTY3XCJcbiAgICAgICAgY29uc3QgYXBwQWNjb3VudFRva2VuID0gXCJmNmE3ODkwMS0yMzQ1LTY3ODktZjZhNy04OTAxMjM0NTY3ODlcIlxuICAgICAgICBjb25zdCBzaWduYXR1cmVWMTogUHJvbW90aW9uYWxPZmZlclNpZ25hdHVyZVYxID0ge1xuICAgICAgICAgICAgZW5jb2RlZFNpZ25hdHVyZTogXCJiYXNlNjRlbmNvZGVkU2lnbmF0dXJlXCIsXG4gICAgICAgICAgICBwcm9kdWN0SWQ6IFwiY29tLmV4YW1wbGUucHJvZHVjdFwiLFxuICAgICAgICAgICAgbm9uY2U6IG5vbmNlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiAxNjk4MTQ4OTAwMDAwLFxuICAgICAgICAgICAga2V5SWQ6IFwia2V5SWQxMjNcIixcbiAgICAgICAgICAgIG9mZmVySWRlbnRpZmllcjogXCJvZmZlcjEyM1wiLFxuICAgICAgICAgICAgYXBwQWNjb3VudFRva2VuOiBhcHBBY2NvdW50VG9rZW5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHByb21vdGlvbmFsT2ZmZXI6IFByb21vdGlvbmFsT2ZmZXIgPSB7XG4gICAgICAgICAgICBtZXNzYWdlSWRlbnRpZmllcjogbWVzc2FnZUlkLFxuICAgICAgICAgICAgcHJvbW90aW9uYWxPZmZlclNpZ25hdHVyZVYxOiBzaWduYXR1cmVWMVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQm9keTogUmVhbHRpbWVSZXNwb25zZUJvZHkgPSB7XG4gICAgICAgICAgICBwcm9tb3Rpb25hbE9mZmVyOiBwcm9tb3Rpb25hbE9mZmVyXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXJpYWxpemUgdG8gSlNPTlxuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkocmVzcG9uc2VCb2R5KVxuICAgICAgICBjb25zdCBqc29uT2JqID0gSlNPTi5wYXJzZShqc29uKVxuXG4gICAgICAgIC8vIFZhbGlkYXRlIEpTT04gc3RydWN0dXJlXG4gICAgICAgIGV4cGVjdChqc29uT2JqKS50b0hhdmVQcm9wZXJ0eShcInByb21vdGlvbmFsT2ZmZXJcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmoucHJvbW90aW9uYWxPZmZlcikudG9IYXZlUHJvcGVydHkoXCJtZXNzYWdlSWRlbnRpZmllclwiKVxuICAgICAgICBleHBlY3QoanNvbk9iai5wcm9tb3Rpb25hbE9mZmVyKS50b0hhdmVQcm9wZXJ0eShcInByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMVwiKVxuICAgICAgICBleHBlY3QoanNvbk9iai5wcm9tb3Rpb25hbE9mZmVyLm1lc3NhZ2VJZGVudGlmaWVyKS50b0JlKFwiZDRlNWY2YTctODkwMS0yMzQ1LWQ0ZTUtZjZhNzg5MDEyMzQ1XCIpXG5cbiAgICAgICAgY29uc3QgdjFOb2RlID0ganNvbk9iai5wcm9tb3Rpb25hbE9mZmVyLnByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMVxuICAgICAgICBleHBlY3QodjFOb2RlKS50b0hhdmVQcm9wZXJ0eShcImVuY29kZWRTaWduYXR1cmVcIilcbiAgICAgICAgZXhwZWN0KHYxTm9kZSkudG9IYXZlUHJvcGVydHkoXCJwcm9kdWN0SWRcIilcbiAgICAgICAgZXhwZWN0KHYxTm9kZSkudG9IYXZlUHJvcGVydHkoXCJub25jZVwiKVxuICAgICAgICBleHBlY3QodjFOb2RlKS50b0hhdmVQcm9wZXJ0eShcInRpbWVzdGFtcFwiKVxuICAgICAgICBleHBlY3QodjFOb2RlKS50b0hhdmVQcm9wZXJ0eShcImtleUlkXCIpXG4gICAgICAgIGV4cGVjdCh2MU5vZGUpLnRvSGF2ZVByb3BlcnR5KFwib2ZmZXJJZGVudGlmaWVyXCIpXG4gICAgICAgIGV4cGVjdCh2MU5vZGUpLnRvSGF2ZVByb3BlcnR5KFwiYXBwQWNjb3VudFRva2VuXCIpXG4gICAgICAgIGV4cGVjdCh2MU5vZGUuZW5jb2RlZFNpZ25hdHVyZSkudG9CZShcImJhc2U2NGVuY29kZWRTaWduYXR1cmVcIilcbiAgICAgICAgZXhwZWN0KHYxTm9kZS5wcm9kdWN0SWQpLnRvQmUoXCJjb20uZXhhbXBsZS5wcm9kdWN0XCIpXG4gICAgICAgIGV4cGVjdCh2MU5vZGUubm9uY2UpLnRvQmUoXCJlNWY2YTc4OS0wMTIzLTQ1NjctZTVmNi1hNzg5MDEyMzQ1NjdcIilcbiAgICAgICAgZXhwZWN0KHYxTm9kZS50aW1lc3RhbXApLnRvQmUoMTY5ODE0ODkwMDAwMClcbiAgICAgICAgZXhwZWN0KHYxTm9kZS5rZXlJZCkudG9CZShcImtleUlkMTIzXCIpXG4gICAgICAgIGV4cGVjdCh2MU5vZGUub2ZmZXJJZGVudGlmaWVyKS50b0JlKFwib2ZmZXIxMjNcIilcbiAgICAgICAgZXhwZWN0KHYxTm9kZS5hcHBBY2NvdW50VG9rZW4pLnRvQmUoXCJmNmE3ODkwMS0yMzQ1LTY3ODktZjZhNy04OTAxMjM0NTY3ODlcIilcblxuICAgICAgICBleHBlY3QoanNvbk9iai5wcm9tb3Rpb25hbE9mZmVyKS5ub3QudG9IYXZlUHJvcGVydHkoXCJwcm9tb3Rpb25hbE9mZmVyU2lnbmF0dXJlVjJcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLm5vdC50b0hhdmVQcm9wZXJ0eShcIm1lc3NhZ2VcIilcbiAgICAgICAgZXhwZWN0KGpzb25PYmopLm5vdC50b0hhdmVQcm9wZXJ0eShcImFsdGVybmF0ZVByb2R1Y3RcIilcblxuICAgICAgICAvLyBEZXNlcmlhbGl6ZSBiYWNrXG4gICAgICAgIGNvbnN0IGRlc2VyaWFsaXplZDogUmVhbHRpbWVSZXNwb25zZUJvZHkgPSBKU09OLnBhcnNlKGpzb24pXG5cbiAgICAgICAgLy8gVmVyaWZ5XG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQubWVzc2FnZSkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQuYWx0ZXJuYXRlUHJvZHVjdCkudG9CZVVuZGVmaW5lZCgpXG4gICAgICAgIGV4cGVjdChkZXNlcmlhbGl6ZWQucHJvbW90aW9uYWxPZmZlcikudG9CZURlZmluZWQoKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLnByb21vdGlvbmFsT2ZmZXI/Lm1lc3NhZ2VJZGVudGlmaWVyKS50b0JlKG1lc3NhZ2VJZClcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZC5wcm9tb3Rpb25hbE9mZmVyPy5wcm9tb3Rpb25hbE9mZmVyU2lnbmF0dXJlVjIpLnRvQmVVbmRlZmluZWQoKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkLnByb21vdGlvbmFsT2ZmZXI/LnByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMSkudG9CZURlZmluZWQoKVxuXG4gICAgICAgIGNvbnN0IGRlc2VyaWFsaXplZFYxID0gZGVzZXJpYWxpemVkLnByb21vdGlvbmFsT2ZmZXI/LnByb21vdGlvbmFsT2ZmZXJTaWduYXR1cmVWMVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkVjE/LnByb2R1Y3RJZCkudG9CZShcImNvbS5leGFtcGxlLnByb2R1Y3RcIilcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZFYxPy5vZmZlcklkZW50aWZpZXIpLnRvQmUoXCJvZmZlcjEyM1wiKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkVjE/Lm5vbmNlKS50b0JlKG5vbmNlKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkVjE/LnRpbWVzdGFtcCkudG9CZSgxNjk4MTQ4OTAwMDAwKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkVjE/LmtleUlkKS50b0JlKFwia2V5SWQxMjNcIilcbiAgICAgICAgZXhwZWN0KGRlc2VyaWFsaXplZFYxPy5hcHBBY2NvdW50VG9rZW4pLnRvQmUoYXBwQWNjb3VudFRva2VuKVxuICAgICAgICBleHBlY3QoZGVzZXJpYWxpemVkVjE/LmVuY29kZWRTaWduYXR1cmUpLnRvQmUoXCJiYXNlNjRlbmNvZGVkU2lnbmF0dXJlXCIpXG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgc2VyaWFsaXplIFJlYWx0aW1lUmVzcG9uc2VCb2R5IHdpdGggY29ycmVjdCBmaWVsZCBuYW1lcycsICgpID0+IHtcbiAgICAgICAgLy8gVGVzdCB0aGF0IEpTT04gc2VyaWFsaXphdGlvbiB1c2VzIGNvcnJlY3QgZmllbGQgbmFtZXNcbiAgICAgICAgY29uc3QgbWVzc2FnZUlkID0gXCIxMjM0NTY3OC0xMjM0LTEyMzQtMTIzNC0xMjM0NTY3ODkwMTJcIlxuICAgICAgICBjb25zdCBtZXNzYWdlOiBNZXNzYWdlID0ge1xuICAgICAgICAgICAgbWVzc2FnZUlkZW50aWZpZXI6IG1lc3NhZ2VJZFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlQm9keTogUmVhbHRpbWVSZXNwb25zZUJvZHkgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkocmVzcG9uc2VCb2R5KVxuXG4gICAgICAgIC8vIFZlcmlmeSBKU09OIGNvbnRhaW5zIGNvcnJlY3QgZmllbGQgbmFtZXNcbiAgICAgICAgZXhwZWN0KGpzb24pLnRvQ29udGFpbignXCJtZXNzYWdlXCInKVxuICAgICAgICBleHBlY3QoanNvbikudG9Db250YWluKCdcIm1lc3NhZ2VJZGVudGlmaWVyXCInKVxuICAgICAgICBleHBlY3QoanNvbikudG9Db250YWluKCdcIjEyMzQ1Njc4LTEyMzQtMTIzNC0xMjM0LTEyMzQ1Njc4OTAxMlwiJylcbiAgICB9KVxufSlcbiJdfQ==