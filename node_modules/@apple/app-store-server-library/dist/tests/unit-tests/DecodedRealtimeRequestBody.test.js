"use strict";
// Copyright (c) 2025 Apple Inc. Licensed under MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
const Environment_1 = require("../../models/Environment");
const util_1 = require("../util");
describe('DecodedRealtimeRequestBody', () => {
    it('should decode a realtime request', async () => {
        const signedRealtimeRequest = (0, util_1.createSignedDataFromJson)("tests/resources/models/decodedRealtimeRequest.json");
        const request = await (0, util_1.getDefaultSignedPayloadVerifier)().verifyAndDecodeRealtimeRequest(signedRealtimeRequest);
        expect("99371282").toBe(request.originalTransactionId);
        expect(531412).toBe(request.appAppleId);
        expect("com.example.product").toBe(request.productId);
        expect("en-US").toBe(request.userLocale);
        expect("3db5c98d-8acf-4e29-831e-8e1f82f9f6e9").toBe(request.requestIdentifier);
        expect(Environment_1.Environment.LOCAL_TESTING).toBe(request.environment);
        expect(1698148900000).toBe(request.signedDate);
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVjb2RlZFJlYWx0aW1lUmVxdWVzdEJvZHkudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Rlc3RzL3VuaXQtdGVzdHMvRGVjb2RlZFJlYWx0aW1lUmVxdWVzdEJvZHkudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsNERBQTREOztBQUU1RCwwREFBdUQ7QUFDdkQsa0NBQW9GO0FBRXBGLFFBQVEsQ0FBQyw0QkFBNEIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEtBQUssSUFBSSxFQUFFO1FBQzlDLE1BQU0scUJBQXFCLEdBQUcsSUFBQSwrQkFBd0IsRUFBQyxvREFBb0QsQ0FBQyxDQUFBO1FBRTVHLE1BQU0sT0FBTyxHQUFHLE1BQU0sSUFBQSxzQ0FBK0IsR0FBRSxDQUFDLDhCQUE4QixDQUFDLHFCQUFxQixDQUFDLENBQUE7UUFFN0csTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQTtRQUN0RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQTtRQUN2QyxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1FBQ3JELE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFBO1FBQ3hDLE1BQU0sQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsQ0FBQTtRQUM5RSxNQUFNLENBQUMseUJBQVcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQzNELE1BQU0sQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFBO0lBQ2xELENBQUMsQ0FBQyxDQUFBO0FBQ04sQ0FBQyxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIDIwMjUgQXBwbGUgSW5jLiBMaWNlbnNlZCB1bmRlciBNSVQgTGljZW5zZS5cblxuaW1wb3J0IHsgRW52aXJvbm1lbnQgfSBmcm9tIFwiLi4vLi4vbW9kZWxzL0Vudmlyb25tZW50XCI7XG5pbXBvcnQgeyBjcmVhdGVTaWduZWREYXRhRnJvbUpzb24sIGdldERlZmF1bHRTaWduZWRQYXlsb2FkVmVyaWZpZXIgfSBmcm9tIFwiLi4vdXRpbFwiO1xuXG5kZXNjcmliZSgnRGVjb2RlZFJlYWx0aW1lUmVxdWVzdEJvZHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZWNvZGUgYSByZWFsdGltZSByZXF1ZXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzaWduZWRSZWFsdGltZVJlcXVlc3QgPSBjcmVhdGVTaWduZWREYXRhRnJvbUpzb24oXCJ0ZXN0cy9yZXNvdXJjZXMvbW9kZWxzL2RlY29kZWRSZWFsdGltZVJlcXVlc3QuanNvblwiKVxuXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBhd2FpdCBnZXREZWZhdWx0U2lnbmVkUGF5bG9hZFZlcmlmaWVyKCkudmVyaWZ5QW5kRGVjb2RlUmVhbHRpbWVSZXF1ZXN0KHNpZ25lZFJlYWx0aW1lUmVxdWVzdClcblxuICAgICAgICBleHBlY3QoXCI5OTM3MTI4MlwiKS50b0JlKHJlcXVlc3Qub3JpZ2luYWxUcmFuc2FjdGlvbklkKVxuICAgICAgICBleHBlY3QoNTMxNDEyKS50b0JlKHJlcXVlc3QuYXBwQXBwbGVJZClcbiAgICAgICAgZXhwZWN0KFwiY29tLmV4YW1wbGUucHJvZHVjdFwiKS50b0JlKHJlcXVlc3QucHJvZHVjdElkKVxuICAgICAgICBleHBlY3QoXCJlbi1VU1wiKS50b0JlKHJlcXVlc3QudXNlckxvY2FsZSlcbiAgICAgICAgZXhwZWN0KFwiM2RiNWM5OGQtOGFjZi00ZTI5LTgzMWUtOGUxZjgyZjlmNmU5XCIpLnRvQmUocmVxdWVzdC5yZXF1ZXN0SWRlbnRpZmllcilcbiAgICAgICAgZXhwZWN0KEVudmlyb25tZW50LkxPQ0FMX1RFU1RJTkcpLnRvQmUocmVxdWVzdC5lbnZpcm9ubWVudClcbiAgICAgICAgZXhwZWN0KDE2OTgxNDg5MDAwMDApLnRvQmUocmVxdWVzdC5zaWduZWREYXRlKVxuICAgIH0pXG59KVxuIl19